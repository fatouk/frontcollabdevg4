<div *ngIf="isLoading" class="spinner-container">
  <div class="spinner"></div>
</div>

<div *ngIf="error" class="error" style="color: red; text-align:center; padding: 15px;">
  {{ error }}
</div>

<div class="cards-container" *ngIf="!isLoading && !error && filteredProjects.length > 0">
  <div *ngFor="let project of filteredProjects" class="card">
    <div class="titres">
      <div class="category" [title]="project.secteur || 'Secteur non renseigné'">
        {{ project.secteur || 'Secteur inconnu' }}
      </div>

      <div class="coins" [title]="'Coins requis: ' + (project.coinsRequired ?? 0)">
        <i class="fas fa-coins" aria-hidden="true"></i>
        <span>{{ project.coinsRequired ?? 0 }}</span>
      </div>
    </div>

    <div class="divider"></div>

    <div class="info">
      <h1 [title]="project.titre">{{ project.titre || 'Titre indisponible' }}</h1>
      <p [title]="project.description">{{ project.description || 'Description non disponible' }}</p>
    </div>

    <div class="details">
      <div class="langages" [title]="project.domaine || 'Domaine non renseigné'">
        {{ project.domaine || 'Domaine inconnu' }}
      </div>

      <!-- Niveau avec couleur dynamique -->
      <div
        class="langages"
        [ngClass]="'niveau-' + toCssClass(project.niveau)"
        [title]="project.niveau || 'Niveau non renseigné'"
      >
        {{ project.niveau || 'Niveau inconnu' }}
      </div>

      <div class="langages" *ngIf="project.dateCreation" [title]="project.dateCreation">
        {{ project.dateCreation | date:'shortDate' }}
      </div>
    </div>

    <div class="divider"></div>

    <div class="buttons">
      <button [routerLink]="'/voir-participation/' + project.id">
        Voir participants
      </button>
    </div>
  </div>
</div>
