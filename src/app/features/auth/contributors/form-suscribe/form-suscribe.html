<div class="main-container">
  <!-- Partie gauche avec informations -->
  <div class="info-container">
    <div class="rotating-container">
      <div class="rotating-element">
        <img src="logo.png" alt="Logo" class="rotating-logo">
      </div>
    </div>

    <h1 class="info-title">Rejoignez notre communauté</h1>

    <p class="info-description">
      Créez votre compte pour accéder à toutes les fonctionnalités de notre plateforme.
      Collaborez, innovez et développez vos projets avec notre solution complète.
    </p>
  </div>

  <!-- Partie droite avec formulaire -->
  <div class="register-container">
    <div class="register-card">
      <div class="register-header">
        <h1>Commencer l'aventure</h1>
        <p>Créez un compte pour accéder à toutes les fonctionnalités</p>
      </div>

      <!-- Message d'erreur général -->
      <div *ngIf="errorMessage" class="error-message">
        <i class="fas fa-exclamation-circle error-icon"></i>
        {{ errorMessage }}
      </div>

      <!-- Message de succès -->
      <div *ngIf="successMessage" class="success-message">
        <i class="fas fa-check-circle"></i>
        {{ successMessage }}
      </div>

      <form (ngSubmit)="onSubmit()">
        <!-- Nom et prénom -->
        <div class="form-row">
          <div class="form-group">
            <label for="nom">Nom</label>
            <div class="input-field" [class.input-error]="errors.nom">
              <input type="text" id="nom" name="nom" [(ngModel)]="user.nom" placeholder="Votre nom" required />
            </div>
            <div *ngIf="errors.nom" class="field-error">
              <i class="fas fa-exclamation-circle"></i>
              {{ errors.nom }}
            </div>
          </div>
          <div class="form-group">
            <label for="prenom">Prénom</label>
            <div class="input-field" [class.input-error]="errors.prenom">
              <input type="text" id="prenom" name="prenom" [(ngModel)]="user.prenom" placeholder="Votre prénom" required />
            </div>
            <div *ngIf="errors.prenom" class="field-error">
              <i class="fas fa-exclamation-circle"></i>
              {{ errors.prenom }}
            </div>
          </div>
        </div>

        <!-- Téléphone -->
        <div class="form-group">
          <label for="telephone">Téléphone</label>
          <div class="input-field" [class.input-error]="errors.telephone">
            <input type="text" id="telephone" name="telephone" [(ngModel)]="user.telephone" placeholder="Votre numéro de téléphone" required />
          </div>
          <div *ngIf="errors.telephone" class="field-error">
            <i class="fas fa-exclamation-circle"></i>
            {{ errors.telephone }}
          </div>
        </div>

        <!-- Email -->
        <div class="form-group">
          <label for="email">Email</label>
          <div class="input-field" [class.input-error]="errors.email">
            <input type="email" id="email" name="email" [(ngModel)]="user.email" placeholder="exemple@gmail.com" required />
          </div>
          <div *ngIf="errors.email" class="field-error">
            <i class="fas fa-exclamation-circle"></i>
            {{ errors.email }}
          </div>
        </div>

        <!-- Mot de passe -->
        <div class="form-group">
          <label for="password">Mot de passe</label>
          <div class="input-field password-field" [class.input-error]="errors.password">
            <input [type]="showPassword ? 'text' : 'password'" id="password" name="password" [(ngModel)]="user.password" placeholder="Votre mot de passe" required />
            <span class="toggle-password" (click)="togglePasswordVisibility('password')">
              <i class="eye-icon" [class.fa-eye]="!showPassword" [class.fa-eye-slash]="showPassword"></i>
            </span>
          </div>
          <div *ngIf="errors.password" class="field-error">
            <i class="fas fa-exclamation-circle"></i>
            {{ errors.password }}
          </div>
          <div class="password-rules">
            <p>Le mot de passe doit contenir :</p>
            <ul>
              <li [class.valid]="passwordHasMinLength">Minimum 8 caractères</li>
              <li [class.valid]="passwordHasUpperCase">1 lettre majuscule</li>
              <li [class.valid]="passwordHasNumber">1 chiffre</li>
              <li [class.valid]="passwordHasSpecialChar">1 caractère spécial</li>
            </ul>
          </div>
        </div>
        
        <div class="form-group">
          <label for="confirm-password">Confirmer le mot de passe</label>
          <div class="input-field password-field" [class.input-error]="errors.confirmPassword">
            <input [type]="showConfirmPassword ? 'text' : 'password'" id="confirm-password" name="confirmPassword" [(ngModel)]="user.confirmPassword" placeholder="Confirmer votre mot de passe" required />
            <span class="toggle-password" (click)="togglePasswordVisibility('confirmPassword')">
              <i class="eye-icon" [class.fa-eye]="!showConfirmPassword" [class.fa-eye-slash]="showConfirmPassword"></i>
            </span>
          </div>
          <div *ngIf="errors.confirmPassword" class="field-error">
            <i class="fas fa-exclamation-circle"></i>
            {{ errors.confirmPassword }}
          </div>
        </div>

        <!-- Conditions -->
        <div class="form-check">
          <input type="checkbox" id="terms" name="terms" [(ngModel)]="termsAccepted" required />
          <label for="terms">J'accepte les <a (click)="toggleModal(); $event.preventDefault()" href="#">conditions d'utilisation</a></label>
          <div *ngIf="errors.terms" class="field-error">
            <i class="fas fa-exclamation-circle"></i>
            {{ errors.terms }}
          </div>
        </div>
 
        <!-- Bouton d'inscription -->
        <button type="submit" class="register-btn" [disabled]="isLoading">
          <span *ngIf="!isLoading">S'inscrire</span>
          <div *ngIf="isLoading" class="spinner"></div>
        </button>

        <div class="login-link">
          <span>Vous avez déjà un compte ?</span>
          <a routerLink="/login">Se connecter</a>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- MODAL Conditions d'utilisation -->
<div class="modal-overlay" [class.show]="showModals">
  <div class="modal">
    <div class="modal-header">
      <h2>Conditions d'utilisation</h2>
      <button class="close-btn" (click)="toggleModal()">&times;</button>
    </div>
    <div class="modal-body">
      <p>
        Bienvenue sur notre plateforme ! En créant un compte, vous acceptez les conditions suivantes :
      </p>
      <ul>
        <li>Respecter les autres utilisateurs</li>
        <li>Ne pas partager d'informations fausses ou trompeuses</li>
        <li>Protéger vos identifiants de connexion</li>
        <li>Utiliser la plateforme de manière responsable</li>
      </ul>
      <p>Pour plus de détails, veuillez consulter notre site officiel.</p>
    </div>
    <div class="modal-footer">
      <button class="agree-btn" (click)="toggleModal()">J'ai compris</button>
    </div>
  </div>
</div>